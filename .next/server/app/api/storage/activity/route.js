"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/storage/activity/route";
exports.ids = ["app/api/storage/activity/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstorage%2Factivity%2Froute&page=%2Fapi%2Fstorage%2Factivity%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstorage%2Factivity%2Froute.ts&appDir=%2FUsers%2Frishalbabu%2FDocuments%2FGitHub%2FFlavours%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frishalbabu%2FDocuments%2FGitHub%2FFlavours&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstorage%2Factivity%2Froute&page=%2Fapi%2Fstorage%2Factivity%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstorage%2Factivity%2Froute.ts&appDir=%2FUsers%2Frishalbabu%2FDocuments%2FGitHub%2FFlavours%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frishalbabu%2FDocuments%2FGitHub%2FFlavours&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/node-polyfill-headers */ \"(rsc)/./node_modules/next/dist/server/node-polyfill-headers.js\");\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _Users_rishalbabu_Documents_GitHub_Flavours_app_api_storage_activity_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/storage/activity/route.ts */ \"(rsc)/./app/api/storage/activity/route.ts\");\n\n// @ts-ignore this need to be imported from next/dist to be external\n\n\n// @ts-expect-error - replaced by webpack/turbopack loader\n\nconst AppRouteRouteModule = next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__.AppRouteRouteModule;\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__.RouteKind.APP_ROUTE,\n        page: \"/api/storage/activity/route\",\n        pathname: \"/api/storage/activity\",\n        filename: \"route\",\n        bundlePath: \"app/api/storage/activity/route\"\n    },\n    resolvedPagePath: \"/Users/rishalbabu/Documents/GitHub/Flavours/app/api/storage/activity/route.ts\",\n    nextConfigOutput,\n    userland: _Users_rishalbabu_Documents_GitHub_Flavours_app_api_storage_activity_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/storage/activity/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdG9yYWdlJTJGYWN0aXZpdHklMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnN0b3JhZ2UlMkZhY3Rpdml0eSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnN0b3JhZ2UlMkZhY3Rpdml0eSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnJpc2hhbGJhYnUlMkZEb2N1bWVudHMlMkZHaXRIdWIlMkZGbGF2b3VycyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZyaXNoYWxiYWJ1JTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGRmxhdm91cnMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ0Q7QUFDaEQ7QUFDMEY7QUFDM0I7QUFDL0Q7QUFDMEc7QUFDMUcsNEJBQTRCLGdIQUEwQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNpSjs7QUFFakoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvP2Q2ODkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwibmV4dC9kaXN0L3NlcnZlci9ub2RlLXBvbHlmaWxsLWhlYWRlcnNcIjtcbi8vIEB0cy1pZ25vcmUgdGhpcyBuZWVkIHRvIGJlIGltcG9ydGVkIGZyb20gbmV4dC9kaXN0IHRvIGJlIGV4dGVybmFsXG5pbXBvcnQgKiBhcyBtb2R1bGUgZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbi8vIEB0cy1leHBlY3QtZXJyb3IgLSByZXBsYWNlZCBieSB3ZWJwYWNrL3R1cmJvcGFjayBsb2FkZXJcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcmlzaGFsYmFidS9Eb2N1bWVudHMvR2l0SHViL0ZsYXZvdXJzL2FwcC9hcGkvc3RvcmFnZS9hY3Rpdml0eS9yb3V0ZS50c1wiO1xuY29uc3QgQXBwUm91dGVSb3V0ZU1vZHVsZSA9IG1vZHVsZS5BcHBSb3V0ZVJvdXRlTW9kdWxlO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3RvcmFnZS9hY3Rpdml0eS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3N0b3JhZ2UvYWN0aXZpdHlcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N0b3JhZ2UvYWN0aXZpdHkvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvcmlzaGFsYmFidS9Eb2N1bWVudHMvR2l0SHViL0ZsYXZvdXJzL2FwcC9hcGkvc3RvcmFnZS9hY3Rpdml0eS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zdG9yYWdlL2FjdGl2aXR5L3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstorage%2Factivity%2Froute&page=%2Fapi%2Fstorage%2Factivity%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstorage%2Factivity%2Froute.ts&appDir=%2FUsers%2Frishalbabu%2FDocuments%2FGitHub%2FFlavours%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frishalbabu%2FDocuments%2FGitHub%2FFlavours&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/storage/activity/route.ts":
/*!*******************************************!*\
  !*** ./app/api/storage/activity/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_storage_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/storage-service */ \"(rsc)/./lib/storage-service.ts\");\n\n\n/**\n * GET /api/storage/activity - Get user activity logs\n */ async function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const username = searchParams.get(\"username\");\n        const logType = searchParams.get(\"type\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"100\");\n        if (!username) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Username is required\"\n            }, {\n                status: 400\n            });\n        }\n        const activityLogs = await _lib_storage_service__WEBPACK_IMPORTED_MODULE_1__.storageService.getActivityLogs(username, logType || undefined);\n        // Apply limit\n        const limitedLogs = activityLogs.slice(0, limit);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: {\n                logs: limitedLogs,\n                total: activityLogs.length,\n                returned: limitedLogs.length\n            }\n        });\n    } catch (error) {\n        console.error(\"Activity retrieval error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to retrieve activity logs\"\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * POST /api/storage/activity - Log user activity\n */ async function POST(request) {\n    try {\n        const { username, type, details, metadata } = await request.json();\n        if (!username || !type || !details) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Username, type, and details are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate activity type\n        const validTypes = [\n            \"login\",\n            \"logout\",\n            \"content_upload\",\n            \"content_delete\",\n            \"like\",\n            \"comment\",\n            \"subscription\",\n            \"purchase\",\n            \"interaction\"\n        ];\n        if (!validTypes.includes(type)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid activity type\"\n            }, {\n                status: 400\n            });\n        }\n        await _lib_storage_service__WEBPACK_IMPORTED_MODULE_1__.storageService.logActivity(username, type, details, metadata);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Activity logged successfully\"\n        });\n    } catch (error) {\n        console.error(\"Activity logging error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to log activity\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3N0b3JhZ2UvYWN0aXZpdHkvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF1RDtBQUNEO0FBRXREOztDQUVDLEdBQ00sZUFBZUUsSUFBSUMsT0FBb0I7SUFDNUMsSUFBSTtRQUNGLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUYsUUFBUUcsR0FBRztRQUM1QyxNQUFNQyxXQUFXSCxhQUFhSSxHQUFHLENBQUM7UUFDbEMsTUFBTUMsVUFBVUwsYUFBYUksR0FBRyxDQUFDO1FBQ2pDLE1BQU1FLFFBQVFDLFNBQVNQLGFBQWFJLEdBQUcsQ0FBQyxZQUFZO1FBRXBELElBQUksQ0FBQ0QsVUFBVTtZQUNiLE9BQU9QLGtGQUFZQSxDQUFDWSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXVCLEdBQ2hDO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxlQUFlLE1BQU1kLGdFQUFjQSxDQUFDZSxlQUFlLENBQUNULFVBQVVFLFdBQVdRO1FBRS9FLGNBQWM7UUFDZCxNQUFNQyxjQUFjSCxhQUFhSSxLQUFLLENBQUMsR0FBR1Q7UUFFMUMsT0FBT1Ysa0ZBQVlBLENBQUNZLElBQUksQ0FBQztZQUN2QlEsU0FBUztZQUNUQyxNQUFNO2dCQUNKQyxNQUFNSjtnQkFDTkssT0FBT1IsYUFBYVMsTUFBTTtnQkFDMUJDLFVBQVVQLFlBQVlNLE1BQU07WUFDOUI7UUFDRjtJQUNGLEVBQUUsT0FBT1gsT0FBTztRQUNkYSxRQUFRYixLQUFLLENBQUMsNkJBQTZCQTtRQUMzQyxPQUFPYixrRkFBWUEsQ0FBQ1ksSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQW1DLEdBQzVDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlYSxLQUFLeEIsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU0sRUFBRUksUUFBUSxFQUFFcUIsSUFBSSxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsRUFBRSxHQUFHLE1BQU0zQixRQUFRUyxJQUFJO1FBRWhFLElBQUksQ0FBQ0wsWUFBWSxDQUFDcUIsUUFBUSxDQUFDQyxTQUFTO1lBQ2xDLE9BQU83QixrRkFBWUEsQ0FBQ1ksSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUEyQyxHQUNwRDtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEseUJBQXlCO1FBQ3pCLE1BQU1pQixhQUFhO1lBQ2pCO1lBQVM7WUFBVTtZQUFrQjtZQUNyQztZQUFRO1lBQVc7WUFBZ0I7WUFBWTtTQUNoRDtRQUVELElBQUksQ0FBQ0EsV0FBV0MsUUFBUSxDQUFDSixPQUFPO1lBQzlCLE9BQU81QixrRkFBWUEsQ0FBQ1ksSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUF3QixHQUNqQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTWIsZ0VBQWNBLENBQUNnQyxXQUFXLENBQUMxQixVQUFVcUIsTUFBTUMsU0FBU0M7UUFFMUQsT0FBTzlCLGtGQUFZQSxDQUFDWSxJQUFJLENBQUM7WUFDdkJRLFNBQVM7WUFDVGMsU0FBUztRQUNYO0lBQ0YsRUFBRSxPQUFPckIsT0FBTztRQUNkYSxRQUFRYixLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPYixrRkFBWUEsQ0FBQ1ksSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQXlCLEdBQ2xDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vYXBwL2FwaS9zdG9yYWdlL2FjdGl2aXR5L3JvdXRlLnRzP2FlYWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgc3RvcmFnZVNlcnZpY2UgfSBmcm9tICdAL2xpYi9zdG9yYWdlLXNlcnZpY2UnXG5cbi8qKlxuICogR0VUIC9hcGkvc3RvcmFnZS9hY3Rpdml0eSAtIEdldCB1c2VyIGFjdGl2aXR5IGxvZ3NcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IHVzZXJuYW1lID0gc2VhcmNoUGFyYW1zLmdldCgndXNlcm5hbWUnKVxuICAgIGNvbnN0IGxvZ1R5cGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCd0eXBlJylcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JykgfHwgJzEwMCcpXG5cbiAgICBpZiAoIXVzZXJuYW1lKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdVc2VybmFtZSBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgYWN0aXZpdHlMb2dzID0gYXdhaXQgc3RvcmFnZVNlcnZpY2UuZ2V0QWN0aXZpdHlMb2dzKHVzZXJuYW1lLCBsb2dUeXBlIHx8IHVuZGVmaW5lZClcbiAgICBcbiAgICAvLyBBcHBseSBsaW1pdFxuICAgIGNvbnN0IGxpbWl0ZWRMb2dzID0gYWN0aXZpdHlMb2dzLnNsaWNlKDAsIGxpbWl0KVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiB7IFxuICAgICAgICBsb2dzOiBsaW1pdGVkTG9ncyxcbiAgICAgICAgdG90YWw6IGFjdGl2aXR5TG9ncy5sZW5ndGgsXG4gICAgICAgIHJldHVybmVkOiBsaW1pdGVkTG9ncy5sZW5ndGhcbiAgICAgIH1cbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FjdGl2aXR5IHJldHJpZXZhbCBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHJldHJpZXZlIGFjdGl2aXR5IGxvZ3MnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuLyoqXG4gKiBQT1NUIC9hcGkvc3RvcmFnZS9hY3Rpdml0eSAtIExvZyB1c2VyIGFjdGl2aXR5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VybmFtZSwgdHlwZSwgZGV0YWlscywgbWV0YWRhdGEgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG5cbiAgICBpZiAoIXVzZXJuYW1lIHx8ICF0eXBlIHx8ICFkZXRhaWxzKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdVc2VybmFtZSwgdHlwZSwgYW5kIGRldGFpbHMgYXJlIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBhY3Rpdml0eSB0eXBlXG4gICAgY29uc3QgdmFsaWRUeXBlcyA9IFtcbiAgICAgICdsb2dpbicsICdsb2dvdXQnLCAnY29udGVudF91cGxvYWQnLCAnY29udGVudF9kZWxldGUnLCBcbiAgICAgICdsaWtlJywgJ2NvbW1lbnQnLCAnc3Vic2NyaXB0aW9uJywgJ3B1cmNoYXNlJywgJ2ludGVyYWN0aW9uJ1xuICAgIF1cblxuICAgIGlmICghdmFsaWRUeXBlcy5pbmNsdWRlcyh0eXBlKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCBhY3Rpdml0eSB0eXBlJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBhd2FpdCBzdG9yYWdlU2VydmljZS5sb2dBY3Rpdml0eSh1c2VybmFtZSwgdHlwZSwgZGV0YWlscywgbWV0YWRhdGEpXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdBY3Rpdml0eSBsb2dnZWQgc3VjY2Vzc2Z1bGx5J1xuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQWN0aXZpdHkgbG9nZ2luZyBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGxvZyBhY3Rpdml0eScgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwic3RvcmFnZVNlcnZpY2UiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwidXNlcm5hbWUiLCJnZXQiLCJsb2dUeXBlIiwibGltaXQiLCJwYXJzZUludCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImFjdGl2aXR5TG9ncyIsImdldEFjdGl2aXR5TG9ncyIsInVuZGVmaW5lZCIsImxpbWl0ZWRMb2dzIiwic2xpY2UiLCJzdWNjZXNzIiwiZGF0YSIsImxvZ3MiLCJ0b3RhbCIsImxlbmd0aCIsInJldHVybmVkIiwiY29uc29sZSIsIlBPU1QiLCJ0eXBlIiwiZGV0YWlscyIsIm1ldGFkYXRhIiwidmFsaWRUeXBlcyIsImluY2x1ZGVzIiwibG9nQWN0aXZpdHkiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/storage/activity/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/storage-service.ts":
/*!********************************!*\
  !*** ./lib/storage-service.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   storageService: () => (/* binding */ storageService)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist-node/v4.js\");\n\n\n\n// Storage configuration\nconst STORAGE_ROOT = process.env.STORAGE_ROOT || \"./storage\";\nconst USERS_DIR = path__WEBPACK_IMPORTED_MODULE_1___default().join(STORAGE_ROOT, \"users\");\nclass StorageService {\n    constructor(){\n        this.initialized = false;\n        this.initializeStorage();\n    }\n    /**\n   * Initialize storage directories\n   */ async initializeStorage() {\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.mkdir(STORAGE_ROOT, {\n                recursive: true\n            });\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.mkdir(USERS_DIR, {\n                recursive: true\n            });\n            this.initialized = true;\n            console.log(\"Storage service initialized successfully\");\n        } catch (error) {\n            console.error(\"Failed to initialize storage:\", error);\n            throw new Error(\"Storage initialization failed\");\n        }\n    }\n    /**\n   * Create user folder structure\n   */ async createUserFolders(username) {\n        if (!this.initialized) {\n            await this.initializeStorage();\n        }\n        const sanitizedUsername = this.sanitizeUsername(username);\n        const userRootPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(USERS_DIR, sanitizedUsername);\n        const folderStructure = {\n            username: sanitizedUsername,\n            rootPath: userRootPath,\n            contentPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"content\"),\n            activityPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"activity\"),\n            imagesPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"content\", \"images\"),\n            videosPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"content\", \"videos\"),\n            postsPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"content\", \"posts\"),\n            paymentsPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"payments\"),\n            analyticsPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"analytics\")\n        };\n        try {\n            // Create all directories\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.mkdir(folderStructure.contentPath, {\n                recursive: true\n            });\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.mkdir(folderStructure.activityPath, {\n                recursive: true\n            });\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.mkdir(folderStructure.imagesPath, {\n                recursive: true\n            });\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.mkdir(folderStructure.videosPath, {\n                recursive: true\n            });\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.mkdir(folderStructure.postsPath, {\n                recursive: true\n            });\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.mkdir(folderStructure.paymentsPath, {\n                recursive: true\n            });\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.mkdir(folderStructure.analyticsPath, {\n                recursive: true\n            });\n            // Create initial activity log files\n            await this.createInitialActivityLogs(folderStructure.activityPath);\n            // Create .gitkeep files to ensure directories are tracked\n            await this.createGitkeepFiles(folderStructure);\n            console.log(`User folders created for ${sanitizedUsername}`);\n            return folderStructure;\n        } catch (error) {\n            console.error(`Failed to create user folders for ${sanitizedUsername}:`, error);\n            throw new Error(\"User folder creation failed\");\n        }\n    }\n    /**\n   * Sanitize username for filesystem safety\n   */ sanitizeUsername(username) {\n        return username.replace(/[^a-zA-Z0-9_-]/g, \"_\").replace(/^[^a-zA-Z]/, \"user_\").toLowerCase();\n    }\n    /**\n   * Create initial activity log files\n   */ async createInitialActivityLogs(activityPath) {\n        const initialLogs = {\n            logins: [],\n            interactions: [],\n            subscriptions: [],\n            content_uploads: [],\n            payments: []\n        };\n        for (const [filename, data] of Object.entries(initialLogs)){\n            const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(activityPath, `${filename}.json`);\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.writeFile(filePath, JSON.stringify(data, null, 2));\n        }\n    }\n    /**\n   * Create .gitkeep files to ensure directories are tracked\n   */ async createGitkeepFiles(structure) {\n        const directories = [\n            structure.contentPath,\n            structure.activityPath,\n            structure.imagesPath,\n            structure.videosPath,\n            structure.postsPath,\n            structure.paymentsPath,\n            structure.analyticsPath\n        ];\n        for (const dir of directories){\n            const gitkeepPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(dir, \".gitkeep\");\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.writeFile(gitkeepPath, \"# This file ensures the directory is tracked by git\\n\");\n        }\n    }\n    /**\n   * Get user folder structure\n   */ async getUserFolders(username) {\n        const sanitizedUsername = this.sanitizeUsername(username);\n        const userRootPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(USERS_DIR, sanitizedUsername);\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.access(userRootPath);\n            return {\n                username: sanitizedUsername,\n                rootPath: userRootPath,\n                contentPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"content\"),\n                activityPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"activity\"),\n                imagesPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"content\", \"images\"),\n                videosPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"content\", \"videos\"),\n                postsPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"content\", \"posts\"),\n                paymentsPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"payments\"),\n                analyticsPath: path__WEBPACK_IMPORTED_MODULE_1___default().join(userRootPath, \"analytics\")\n            };\n        } catch (error) {\n            return null;\n        }\n    }\n    /**\n   * Log user activity\n   */ async logActivity(username, type, details, metadata) {\n        const folders = await this.getUserFolders(username);\n        if (!folders) {\n            throw new Error(\"User folders not found\");\n        }\n        const logEntry = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),\n            timestamp: new Date().toISOString(),\n            type,\n            details,\n            metadata\n        };\n        // Determine which log file to update\n        let logFile = \"interactions.json\";\n        switch(type){\n            case \"login\":\n            case \"logout\":\n                logFile = \"logins.json\";\n                break;\n            case \"subscription\":\n                logFile = \"subscriptions.json\";\n                break;\n            case \"content_upload\":\n                logFile = \"content_uploads.json\";\n                break;\n            case \"purchase\":\n                logFile = \"payments.json\";\n                break;\n            default:\n                logFile = \"interactions.json\";\n        }\n        const logPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(folders.activityPath, logFile);\n        try {\n            const existingLogs = await fs__WEBPACK_IMPORTED_MODULE_0__.promises.readFile(logPath, \"utf-8\");\n            const logs = JSON.parse(existingLogs);\n            logs.push(logEntry);\n            // Keep only last 1000 entries to prevent file bloat\n            if (logs.length > 1000) {\n                logs.splice(0, logs.length - 1000);\n            }\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.writeFile(logPath, JSON.stringify(logs, null, 2));\n        } catch (error) {\n            console.error(\"Failed to log activity:\", error);\n            throw new Error(\"Activity logging failed\");\n        }\n    }\n    /**\n   * Store content file\n   */ async storeContent(username, file, originalName, mimeType, contentType) {\n        const folders = await this.getUserFolders(username);\n        if (!folders) {\n            throw new Error(\"User folders not found\");\n        }\n        const fileId = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        const extension = path__WEBPACK_IMPORTED_MODULE_1___default().extname(originalName);\n        const filename = `${fileId}${extension}`;\n        let targetPath;\n        switch(contentType){\n            case \"image\":\n                targetPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(folders.imagesPath, filename);\n                break;\n            case \"video\":\n                targetPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(folders.videosPath, filename);\n                break;\n            case \"post\":\n                targetPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(folders.postsPath, filename);\n                break;\n            default:\n                throw new Error(\"Invalid content type\");\n        }\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.writeFile(targetPath, file);\n            const contentFile = {\n                id: fileId,\n                filename,\n                originalName,\n                mimeType,\n                size: file.length,\n                path: targetPath,\n                uploadedAt: new Date().toISOString()\n            };\n            // Log the content upload\n            await this.logActivity(username, \"content_upload\", {\n                fileId,\n                originalName,\n                mimeType,\n                size: file.length,\n                contentType\n            });\n            return contentFile;\n        } catch (error) {\n            console.error(\"Failed to store content:\", error);\n            throw new Error(\"Content storage failed\");\n        }\n    }\n    /**\n   * Get user activity logs\n   */ async getActivityLogs(username, logType) {\n        const folders = await this.getUserFolders(username);\n        if (!folders) {\n            // Return empty array instead of throwing error for better UX\n            return [];\n        }\n        const logFiles = logType ? [\n            `${logType}.json`\n        ] : [\n            \"logins.json\",\n            \"interactions.json\",\n            \"subscriptions.json\",\n            \"content_uploads.json\",\n            \"payments.json\"\n        ];\n        const allLogs = [];\n        for (const logFile of logFiles){\n            try {\n                const logPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(folders.activityPath, logFile);\n                const logData = await fs__WEBPACK_IMPORTED_MODULE_0__.promises.readFile(logPath, \"utf-8\");\n                const logs = JSON.parse(logData);\n                allLogs.push(...logs);\n            } catch (error) {\n                // Log file might not exist yet, continue\n                console.warn(`Log file ${logFile} not found for user ${username}`);\n            }\n        }\n        // Sort by timestamp (newest first)\n        return allLogs.sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n    }\n    /**\n   * Get user content files\n   */ async getContentFiles(username, contentType) {\n        const folders = await this.getUserFolders(username);\n        if (!folders) {\n            // Return empty array instead of throwing error for better UX\n            return [];\n        }\n        const contentPaths = contentType ? [\n            folders[`${contentType}sPath`]\n        ] : [\n            folders.imagesPath,\n            folders.videosPath,\n            folders.postsPath\n        ];\n        const allFiles = [];\n        for (const contentPath of contentPaths){\n            try {\n                const files = await fs__WEBPACK_IMPORTED_MODULE_0__.promises.readdir(contentPath);\n                for (const file of files){\n                    if (file === \".gitkeep\") continue;\n                    const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(contentPath, file);\n                    const stats = await fs__WEBPACK_IMPORTED_MODULE_0__.promises.stat(filePath);\n                    allFiles.push({\n                        id: path__WEBPACK_IMPORTED_MODULE_1___default().parse(file).name,\n                        filename: file,\n                        originalName: file,\n                        mimeType: \"application/octet-stream\",\n                        size: stats.size,\n                        path: filePath,\n                        uploadedAt: stats.birthtime.toISOString()\n                    });\n                }\n            } catch (error) {\n                console.warn(`Failed to read content directory ${contentPath}:`, error);\n            }\n        }\n        return allFiles.sort((a, b)=>new Date(b.uploadedAt).getTime() - new Date(a.uploadedAt).getTime());\n    }\n    /**\n   * Delete user content\n   */ async deleteContent(username, fileId) {\n        const folders = await this.getUserFolders(username);\n        if (!folders) {\n            throw new Error(\"User folders not found\");\n        }\n        const contentFiles = await this.getContentFiles(username);\n        const fileToDelete = contentFiles.find((file)=>file.id === fileId);\n        if (!fileToDelete) {\n            throw new Error(\"Content file not found\");\n        }\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.unlink(fileToDelete.path);\n            // Log the deletion\n            await this.logActivity(username, \"content_delete\", {\n                fileId,\n                filename: fileToDelete.filename,\n                originalName: fileToDelete.originalName\n            });\n        } catch (error) {\n            console.error(\"Failed to delete content:\", error);\n            throw new Error(\"Content deletion failed\");\n        }\n    }\n    /**\n   * Get storage statistics for a user\n   */ async getUserStorageStats(username) {\n        const folders = await this.getUserFolders(username);\n        if (!folders) {\n            // Return default stats instead of throwing error for better UX\n            return {\n                totalFiles: 0,\n                totalSize: 0,\n                contentBreakdown: {\n                    images: 0,\n                    videos: 0,\n                    posts: 0\n                },\n                activityLogs: 0\n            };\n        }\n        const contentFiles = await this.getContentFiles(username);\n        const activityLogs = await this.getActivityLogs(username);\n        const stats = {\n            totalFiles: contentFiles.length,\n            totalSize: contentFiles.reduce((sum, file)=>sum + file.size, 0),\n            contentBreakdown: {\n                images: contentFiles.filter((f)=>f.path.includes(\"images\")).length,\n                videos: contentFiles.filter((f)=>f.path.includes(\"videos\")).length,\n                posts: contentFiles.filter((f)=>f.path.includes(\"posts\")).length\n            },\n            activityLogs: activityLogs.length\n        };\n        return stats;\n    }\n    /**\n   * Clean up user data (for account deletion)\n   */ async deleteUserData(username) {\n        const sanitizedUsername = this.sanitizeUsername(username);\n        const userRootPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(USERS_DIR, sanitizedUsername);\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.rm(userRootPath, {\n                recursive: true,\n                force: true\n            });\n            console.log(`User data deleted for ${sanitizedUsername}`);\n        } catch (error) {\n            console.error(`Failed to delete user data for ${sanitizedUsername}:`, error);\n            throw new Error(\"User data deletion failed\");\n        }\n    }\n}\n// Export singleton instance\nconst storageService = new StorageService();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (storageService);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3BELE1BQU1DLG9CQUFvQixJQUFJLENBQUNDLGdCQUFnQixDQUFDRjtRQUNoRCxNQUFNRyxlQUFldEIsZ0RBQVMsQ0FBQ00sV0FBV2M7UUFFMUMsSUFBSTtZQUNGLE1BQU1yQix3Q0FBRUEsQ0FBQzhILEVBQUUsQ0FBQ3ZHLGNBQWM7Z0JBQUVULFdBQVc7Z0JBQU1pSCxPQUFPO1lBQUs7WUFDekRoSCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxzQkFBc0IsRUFBRUssa0JBQWtCLENBQUM7UUFDMUQsRUFBRSxPQUFPSixPQUFPO1lBQ2RGLFFBQVFFLEtBQUssQ0FBQyxDQUFDLCtCQUErQixFQUFFSSxrQkFBa0IsQ0FBQyxDQUFDLEVBQUVKO1lBQ3RFLE1BQU0sSUFBSUMsTUFBTTtRQUNsQjtJQUNGO0FBQ0Y7QUFFQSw0QkFBNEI7QUFDckIsTUFBTThHLGlCQUFpQixJQUFJdkgsaUJBQWdCO0FBQ2xELGlFQUFldUgsY0FBY0EsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL2xpYi9zdG9yYWdlLXNlcnZpY2UudHM/NjFjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm9taXNlcyBhcyBmcyB9IGZyb20gJ2ZzJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnXG5cbi8vIFN0b3JhZ2UgY29uZmlndXJhdGlvblxuY29uc3QgU1RPUkFHRV9ST09UID0gcHJvY2Vzcy5lbnYuU1RPUkFHRV9ST09UIHx8ICcuL3N0b3JhZ2UnXG5jb25zdCBVU0VSU19ESVIgPSBwYXRoLmpvaW4oU1RPUkFHRV9ST09ULCAndXNlcnMnKVxuXG4vLyBVc2VyIGZvbGRlciBzdHJ1Y3R1cmUgaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJGb2xkZXJTdHJ1Y3R1cmUge1xuICB1c2VybmFtZTogc3RyaW5nXG4gIHJvb3RQYXRoOiBzdHJpbmdcbiAgY29udGVudFBhdGg6IHN0cmluZ1xuICBhY3Rpdml0eVBhdGg6IHN0cmluZ1xuICBpbWFnZXNQYXRoOiBzdHJpbmdcbiAgdmlkZW9zUGF0aDogc3RyaW5nXG4gIHBvc3RzUGF0aDogc3RyaW5nXG4gIHBheW1lbnRzUGF0aD86IHN0cmluZ1xuICBhbmFseXRpY3NQYXRoPzogc3RyaW5nXG59XG5cbi8vIEFjdGl2aXR5IGxvZyBlbnRyeSBpbnRlcmZhY2VcbmV4cG9ydCBpbnRlcmZhY2UgQWN0aXZpdHlMb2dFbnRyeSB7XG4gIGlkOiBzdHJpbmdcbiAgdGltZXN0YW1wOiBzdHJpbmdcbiAgdHlwZTogJ2xvZ2luJyB8ICdsb2dvdXQnIHwgJ2NvbnRlbnRfdXBsb2FkJyB8ICdjb250ZW50X2RlbGV0ZScgfCAnbGlrZScgfCAnY29tbWVudCcgfCAnc3Vic2NyaXB0aW9uJyB8ICdwdXJjaGFzZScgfCAnaW50ZXJhY3Rpb24nXG4gIGRldGFpbHM6IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgbWV0YWRhdGE/OiB7XG4gICAgaXA/OiBzdHJpbmdcbiAgICB1c2VyQWdlbnQ/OiBzdHJpbmdcbiAgICBzZXNzaW9uSWQ/OiBzdHJpbmdcbiAgfVxufVxuXG4vLyBDb250ZW50IGZpbGUgaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRGaWxlIHtcbiAgaWQ6IHN0cmluZ1xuICBmaWxlbmFtZTogc3RyaW5nXG4gIG9yaWdpbmFsTmFtZTogc3RyaW5nXG4gIG1pbWVUeXBlOiBzdHJpbmdcbiAgc2l6ZTogbnVtYmVyXG4gIHBhdGg6IHN0cmluZ1xuICB1cGxvYWRlZEF0OiBzdHJpbmdcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG59XG5cbmNsYXNzIFN0b3JhZ2VTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBpbml0aWFsaXplZCA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplU3RvcmFnZSgpXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBzdG9yYWdlIGRpcmVjdG9yaWVzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVTdG9yYWdlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBmcy5ta2RpcihTVE9SQUdFX1JPT1QsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgICBhd2FpdCBmcy5ta2RpcihVU0VSU19ESVIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZVxuICAgICAgY29uc29sZS5sb2coJ1N0b3JhZ2Ugc2VydmljZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBzdG9yYWdlOicsIGVycm9yKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdG9yYWdlIGluaXRpYWxpemF0aW9uIGZhaWxlZCcpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB1c2VyIGZvbGRlciBzdHJ1Y3R1cmVcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVVzZXJGb2xkZXJzKHVzZXJuYW1lOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJGb2xkZXJTdHJ1Y3R1cmU+IHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVN0b3JhZ2UoKVxuICAgIH1cblxuICAgIGNvbnN0IHNhbml0aXplZFVzZXJuYW1lID0gdGhpcy5zYW5pdGl6ZVVzZXJuYW1lKHVzZXJuYW1lKVxuICAgIGNvbnN0IHVzZXJSb290UGF0aCA9IHBhdGguam9pbihVU0VSU19ESVIsIHNhbml0aXplZFVzZXJuYW1lKVxuICAgIFxuICAgIGNvbnN0IGZvbGRlclN0cnVjdHVyZTogVXNlckZvbGRlclN0cnVjdHVyZSA9IHtcbiAgICAgIHVzZXJuYW1lOiBzYW5pdGl6ZWRVc2VybmFtZSxcbiAgICAgIHJvb3RQYXRoOiB1c2VyUm9vdFBhdGgsXG4gICAgICBjb250ZW50UGF0aDogcGF0aC5qb2luKHVzZXJSb290UGF0aCwgJ2NvbnRlbnQnKSxcbiAgICAgIGFjdGl2aXR5UGF0aDogcGF0aC5qb2luKHVzZXJSb290UGF0aCwgJ2FjdGl2aXR5JyksXG4gICAgICBpbWFnZXNQYXRoOiBwYXRoLmpvaW4odXNlclJvb3RQYXRoLCAnY29udGVudCcsICdpbWFnZXMnKSxcbiAgICAgIHZpZGVvc1BhdGg6IHBhdGguam9pbih1c2VyUm9vdFBhdGgsICdjb250ZW50JywgJ3ZpZGVvcycpLFxuICAgICAgcG9zdHNQYXRoOiBwYXRoLmpvaW4odXNlclJvb3RQYXRoLCAnY29udGVudCcsICdwb3N0cycpLFxuICAgICAgcGF5bWVudHNQYXRoOiBwYXRoLmpvaW4odXNlclJvb3RQYXRoLCAncGF5bWVudHMnKSxcbiAgICAgIGFuYWx5dGljc1BhdGg6IHBhdGguam9pbih1c2VyUm9vdFBhdGgsICdhbmFseXRpY3MnKVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgYWxsIGRpcmVjdG9yaWVzXG4gICAgICBhd2FpdCBmcy5ta2Rpcihmb2xkZXJTdHJ1Y3R1cmUuY29udGVudFBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgICBhd2FpdCBmcy5ta2Rpcihmb2xkZXJTdHJ1Y3R1cmUuYWN0aXZpdHlQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICAgICAgYXdhaXQgZnMubWtkaXIoZm9sZGVyU3RydWN0dXJlLmltYWdlc1BhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgICBhd2FpdCBmcy5ta2Rpcihmb2xkZXJTdHJ1Y3R1cmUudmlkZW9zUGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSlcbiAgICAgIGF3YWl0IGZzLm1rZGlyKGZvbGRlclN0cnVjdHVyZS5wb3N0c1BhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgICBhd2FpdCBmcy5ta2Rpcihmb2xkZXJTdHJ1Y3R1cmUucGF5bWVudHNQYXRoISwgeyByZWN1cnNpdmU6IHRydWUgfSlcbiAgICAgIGF3YWl0IGZzLm1rZGlyKGZvbGRlclN0cnVjdHVyZS5hbmFseXRpY3NQYXRoISwgeyByZWN1cnNpdmU6IHRydWUgfSlcblxuICAgICAgLy8gQ3JlYXRlIGluaXRpYWwgYWN0aXZpdHkgbG9nIGZpbGVzXG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZUluaXRpYWxBY3Rpdml0eUxvZ3MoZm9sZGVyU3RydWN0dXJlLmFjdGl2aXR5UGF0aClcblxuICAgICAgLy8gQ3JlYXRlIC5naXRrZWVwIGZpbGVzIHRvIGVuc3VyZSBkaXJlY3RvcmllcyBhcmUgdHJhY2tlZFxuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVHaXRrZWVwRmlsZXMoZm9sZGVyU3RydWN0dXJlKVxuXG4gICAgICBjb25zb2xlLmxvZyhgVXNlciBmb2xkZXJzIGNyZWF0ZWQgZm9yICR7c2FuaXRpemVkVXNlcm5hbWV9YClcbiAgICAgIHJldHVybiBmb2xkZXJTdHJ1Y3R1cmVcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSB1c2VyIGZvbGRlcnMgZm9yICR7c2FuaXRpemVkVXNlcm5hbWV9OmAsIGVycm9yKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIGZvbGRlciBjcmVhdGlvbiBmYWlsZWQnKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTYW5pdGl6ZSB1c2VybmFtZSBmb3IgZmlsZXN5c3RlbSBzYWZldHlcbiAgICovXG4gIHByaXZhdGUgc2FuaXRpemVVc2VybmFtZSh1c2VybmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdXNlcm5hbWVcbiAgICAgIC5yZXBsYWNlKC9bXmEtekEtWjAtOV8tXS9nLCAnXycpXG4gICAgICAucmVwbGFjZSgvXlteYS16QS1aXS8sICd1c2VyXycpXG4gICAgICAudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBpbml0aWFsIGFjdGl2aXR5IGxvZyBmaWxlc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVJbml0aWFsQWN0aXZpdHlMb2dzKGFjdGl2aXR5UGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgaW5pdGlhbExvZ3MgPSB7XG4gICAgICBsb2dpbnM6IFtdLFxuICAgICAgaW50ZXJhY3Rpb25zOiBbXSxcbiAgICAgIHN1YnNjcmlwdGlvbnM6IFtdLFxuICAgICAgY29udGVudF91cGxvYWRzOiBbXSxcbiAgICAgIHBheW1lbnRzOiBbXVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgW2ZpbGVuYW1lLCBkYXRhXSBvZiBPYmplY3QuZW50cmllcyhpbml0aWFsTG9ncykpIHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKGFjdGl2aXR5UGF0aCwgYCR7ZmlsZW5hbWV9Lmpzb25gKVxuICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKGZpbGVQYXRoLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIC5naXRrZWVwIGZpbGVzIHRvIGVuc3VyZSBkaXJlY3RvcmllcyBhcmUgdHJhY2tlZFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVHaXRrZWVwRmlsZXMoc3RydWN0dXJlOiBVc2VyRm9sZGVyU3RydWN0dXJlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZGlyZWN0b3JpZXMgPSBbXG4gICAgICBzdHJ1Y3R1cmUuY29udGVudFBhdGgsXG4gICAgICBzdHJ1Y3R1cmUuYWN0aXZpdHlQYXRoLFxuICAgICAgc3RydWN0dXJlLmltYWdlc1BhdGgsXG4gICAgICBzdHJ1Y3R1cmUudmlkZW9zUGF0aCxcbiAgICAgIHN0cnVjdHVyZS5wb3N0c1BhdGgsXG4gICAgICBzdHJ1Y3R1cmUucGF5bWVudHNQYXRoISxcbiAgICAgIHN0cnVjdHVyZS5hbmFseXRpY3NQYXRoIVxuICAgIF1cblxuICAgIGZvciAoY29uc3QgZGlyIG9mIGRpcmVjdG9yaWVzKSB7XG4gICAgICBjb25zdCBnaXRrZWVwUGF0aCA9IHBhdGguam9pbihkaXIsICcuZ2l0a2VlcCcpXG4gICAgICBhd2FpdCBmcy53cml0ZUZpbGUoZ2l0a2VlcFBhdGgsICcjIFRoaXMgZmlsZSBlbnN1cmVzIHRoZSBkaXJlY3RvcnkgaXMgdHJhY2tlZCBieSBnaXRcXG4nKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdXNlciBmb2xkZXIgc3RydWN0dXJlXG4gICAqL1xuICBhc3luYyBnZXRVc2VyRm9sZGVycyh1c2VybmFtZTogc3RyaW5nKTogUHJvbWlzZTxVc2VyRm9sZGVyU3RydWN0dXJlIHwgbnVsbD4ge1xuICAgIGNvbnN0IHNhbml0aXplZFVzZXJuYW1lID0gdGhpcy5zYW5pdGl6ZVVzZXJuYW1lKHVzZXJuYW1lKVxuICAgIGNvbnN0IHVzZXJSb290UGF0aCA9IHBhdGguam9pbihVU0VSU19ESVIsIHNhbml0aXplZFVzZXJuYW1lKVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZzLmFjY2Vzcyh1c2VyUm9vdFBhdGgpXG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXJuYW1lOiBzYW5pdGl6ZWRVc2VybmFtZSxcbiAgICAgICAgcm9vdFBhdGg6IHVzZXJSb290UGF0aCxcbiAgICAgICAgY29udGVudFBhdGg6IHBhdGguam9pbih1c2VyUm9vdFBhdGgsICdjb250ZW50JyksXG4gICAgICAgIGFjdGl2aXR5UGF0aDogcGF0aC5qb2luKHVzZXJSb290UGF0aCwgJ2FjdGl2aXR5JyksXG4gICAgICAgIGltYWdlc1BhdGg6IHBhdGguam9pbih1c2VyUm9vdFBhdGgsICdjb250ZW50JywgJ2ltYWdlcycpLFxuICAgICAgICB2aWRlb3NQYXRoOiBwYXRoLmpvaW4odXNlclJvb3RQYXRoLCAnY29udGVudCcsICd2aWRlb3MnKSxcbiAgICAgICAgcG9zdHNQYXRoOiBwYXRoLmpvaW4odXNlclJvb3RQYXRoLCAnY29udGVudCcsICdwb3N0cycpLFxuICAgICAgICBwYXltZW50c1BhdGg6IHBhdGguam9pbih1c2VyUm9vdFBhdGgsICdwYXltZW50cycpLFxuICAgICAgICBhbmFseXRpY3NQYXRoOiBwYXRoLmpvaW4odXNlclJvb3RQYXRoLCAnYW5hbHl0aWNzJylcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nIHVzZXIgYWN0aXZpdHlcbiAgICovXG4gIGFzeW5jIGxvZ0FjdGl2aXR5KFxuICAgIHVzZXJuYW1lOiBzdHJpbmcsIFxuICAgIHR5cGU6IEFjdGl2aXR5TG9nRW50cnlbJ3R5cGUnXSwgXG4gICAgZGV0YWlsczogUmVjb3JkPHN0cmluZywgYW55PixcbiAgICBtZXRhZGF0YT86IEFjdGl2aXR5TG9nRW50cnlbJ21ldGFkYXRhJ11cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZm9sZGVycyA9IGF3YWl0IHRoaXMuZ2V0VXNlckZvbGRlcnModXNlcm5hbWUpXG4gICAgaWYgKCFmb2xkZXJzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgZm9sZGVycyBub3QgZm91bmQnKVxuICAgIH1cblxuICAgIGNvbnN0IGxvZ0VudHJ5OiBBY3Rpdml0eUxvZ0VudHJ5ID0ge1xuICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB0eXBlLFxuICAgICAgZGV0YWlscyxcbiAgICAgIG1ldGFkYXRhXG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHdoaWNoIGxvZyBmaWxlIHRvIHVwZGF0ZVxuICAgIGxldCBsb2dGaWxlID0gJ2ludGVyYWN0aW9ucy5qc29uJ1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnbG9naW4nOlxuICAgICAgY2FzZSAnbG9nb3V0JzpcbiAgICAgICAgbG9nRmlsZSA9ICdsb2dpbnMuanNvbidcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3N1YnNjcmlwdGlvbic6XG4gICAgICAgIGxvZ0ZpbGUgPSAnc3Vic2NyaXB0aW9ucy5qc29uJ1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY29udGVudF91cGxvYWQnOlxuICAgICAgICBsb2dGaWxlID0gJ2NvbnRlbnRfdXBsb2Fkcy5qc29uJ1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncHVyY2hhc2UnOlxuICAgICAgICBsb2dGaWxlID0gJ3BheW1lbnRzLmpzb24nXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBsb2dGaWxlID0gJ2ludGVyYWN0aW9ucy5qc29uJ1xuICAgIH1cblxuICAgIGNvbnN0IGxvZ1BhdGggPSBwYXRoLmpvaW4oZm9sZGVycy5hY3Rpdml0eVBhdGgsIGxvZ0ZpbGUpXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nTG9ncyA9IGF3YWl0IGZzLnJlYWRGaWxlKGxvZ1BhdGgsICd1dGYtOCcpXG4gICAgICBjb25zdCBsb2dzID0gSlNPTi5wYXJzZShleGlzdGluZ0xvZ3MpXG4gICAgICBsb2dzLnB1c2gobG9nRW50cnkpXG4gICAgICBcbiAgICAgIC8vIEtlZXAgb25seSBsYXN0IDEwMDAgZW50cmllcyB0byBwcmV2ZW50IGZpbGUgYmxvYXRcbiAgICAgIGlmIChsb2dzLmxlbmd0aCA+IDEwMDApIHtcbiAgICAgICAgbG9ncy5zcGxpY2UoMCwgbG9ncy5sZW5ndGggLSAxMDAwKVxuICAgICAgfVxuICAgICAgXG4gICAgICBhd2FpdCBmcy53cml0ZUZpbGUobG9nUGF0aCwgSlNPTi5zdHJpbmdpZnkobG9ncywgbnVsbCwgMikpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2cgYWN0aXZpdHk6JywgZXJyb3IpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjdGl2aXR5IGxvZ2dpbmcgZmFpbGVkJylcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RvcmUgY29udGVudCBmaWxlXG4gICAqL1xuICBhc3luYyBzdG9yZUNvbnRlbnQoXG4gICAgdXNlcm5hbWU6IHN0cmluZyxcbiAgICBmaWxlOiBCdWZmZXIsXG4gICAgb3JpZ2luYWxOYW1lOiBzdHJpbmcsXG4gICAgbWltZVR5cGU6IHN0cmluZyxcbiAgICBjb250ZW50VHlwZTogJ2ltYWdlJyB8ICd2aWRlbycgfCAncG9zdCdcbiAgKTogUHJvbWlzZTxDb250ZW50RmlsZT4ge1xuICAgIGNvbnN0IGZvbGRlcnMgPSBhd2FpdCB0aGlzLmdldFVzZXJGb2xkZXJzKHVzZXJuYW1lKVxuICAgIGlmICghZm9sZGVycykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIGZvbGRlcnMgbm90IGZvdW5kJylcbiAgICB9XG5cbiAgICBjb25zdCBmaWxlSWQgPSB1dWlkdjQoKVxuICAgIGNvbnN0IGV4dGVuc2lvbiA9IHBhdGguZXh0bmFtZShvcmlnaW5hbE5hbWUpXG4gICAgY29uc3QgZmlsZW5hbWUgPSBgJHtmaWxlSWR9JHtleHRlbnNpb259YFxuICAgIFxuICAgIGxldCB0YXJnZXRQYXRoOiBzdHJpbmdcbiAgICBzd2l0Y2ggKGNvbnRlbnRUeXBlKSB7XG4gICAgICBjYXNlICdpbWFnZSc6XG4gICAgICAgIHRhcmdldFBhdGggPSBwYXRoLmpvaW4oZm9sZGVycy5pbWFnZXNQYXRoLCBmaWxlbmFtZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3ZpZGVvJzpcbiAgICAgICAgdGFyZ2V0UGF0aCA9IHBhdGguam9pbihmb2xkZXJzLnZpZGVvc1BhdGgsIGZpbGVuYW1lKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncG9zdCc6XG4gICAgICAgIHRhcmdldFBhdGggPSBwYXRoLmpvaW4oZm9sZGVycy5wb3N0c1BhdGgsIGZpbGVuYW1lKVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbnRlbnQgdHlwZScpXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZzLndyaXRlRmlsZSh0YXJnZXRQYXRoLCBmaWxlKVxuICAgICAgXG4gICAgICBjb25zdCBjb250ZW50RmlsZTogQ29udGVudEZpbGUgPSB7XG4gICAgICAgIGlkOiBmaWxlSWQsXG4gICAgICAgIGZpbGVuYW1lLFxuICAgICAgICBvcmlnaW5hbE5hbWUsXG4gICAgICAgIG1pbWVUeXBlLFxuICAgICAgICBzaXplOiBmaWxlLmxlbmd0aCxcbiAgICAgICAgcGF0aDogdGFyZ2V0UGF0aCxcbiAgICAgICAgdXBsb2FkZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9XG5cbiAgICAgIC8vIExvZyB0aGUgY29udGVudCB1cGxvYWRcbiAgICAgIGF3YWl0IHRoaXMubG9nQWN0aXZpdHkodXNlcm5hbWUsICdjb250ZW50X3VwbG9hZCcsIHtcbiAgICAgICAgZmlsZUlkLFxuICAgICAgICBvcmlnaW5hbE5hbWUsXG4gICAgICAgIG1pbWVUeXBlLFxuICAgICAgICBzaXplOiBmaWxlLmxlbmd0aCxcbiAgICAgICAgY29udGVudFR5cGVcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBjb250ZW50RmlsZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc3RvcmUgY29udGVudDonLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ29udGVudCBzdG9yYWdlIGZhaWxlZCcpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB1c2VyIGFjdGl2aXR5IGxvZ3NcbiAgICovXG4gIGFzeW5jIGdldEFjdGl2aXR5TG9ncyh1c2VybmFtZTogc3RyaW5nLCBsb2dUeXBlPzogc3RyaW5nKTogUHJvbWlzZTxBY3Rpdml0eUxvZ0VudHJ5W10+IHtcbiAgICBjb25zdCBmb2xkZXJzID0gYXdhaXQgdGhpcy5nZXRVc2VyRm9sZGVycyh1c2VybmFtZSlcbiAgICBpZiAoIWZvbGRlcnMpIHtcbiAgICAgIC8vIFJldHVybiBlbXB0eSBhcnJheSBpbnN0ZWFkIG9mIHRocm93aW5nIGVycm9yIGZvciBiZXR0ZXIgVVhcbiAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIGNvbnN0IGxvZ0ZpbGVzID0gbG9nVHlwZSA/IFtgJHtsb2dUeXBlfS5qc29uYF0gOiBbXG4gICAgICAnbG9naW5zLmpzb24nLFxuICAgICAgJ2ludGVyYWN0aW9ucy5qc29uJyxcbiAgICAgICdzdWJzY3JpcHRpb25zLmpzb24nLFxuICAgICAgJ2NvbnRlbnRfdXBsb2Fkcy5qc29uJyxcbiAgICAgICdwYXltZW50cy5qc29uJ1xuICAgIF1cblxuICAgIGNvbnN0IGFsbExvZ3M6IEFjdGl2aXR5TG9nRW50cnlbXSA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IGxvZ0ZpbGUgb2YgbG9nRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGxvZ1BhdGggPSBwYXRoLmpvaW4oZm9sZGVycy5hY3Rpdml0eVBhdGgsIGxvZ0ZpbGUpXG4gICAgICAgIGNvbnN0IGxvZ0RhdGEgPSBhd2FpdCBmcy5yZWFkRmlsZShsb2dQYXRoLCAndXRmLTgnKVxuICAgICAgICBjb25zdCBsb2dzID0gSlNPTi5wYXJzZShsb2dEYXRhKVxuICAgICAgICBhbGxMb2dzLnB1c2goLi4ubG9ncylcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIExvZyBmaWxlIG1pZ2h0IG5vdCBleGlzdCB5ZXQsIGNvbnRpbnVlXG4gICAgICAgIGNvbnNvbGUud2FybihgTG9nIGZpbGUgJHtsb2dGaWxlfSBub3QgZm91bmQgZm9yIHVzZXIgJHt1c2VybmFtZX1gKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvcnQgYnkgdGltZXN0YW1wIChuZXdlc3QgZmlyc3QpXG4gICAgcmV0dXJuIGFsbExvZ3Muc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi50aW1lc3RhbXApLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEudGltZXN0YW1wKS5nZXRUaW1lKCkpXG4gIH1cblxuICAvKipcbiAgICogR2V0IHVzZXIgY29udGVudCBmaWxlc1xuICAgKi9cbiAgYXN5bmMgZ2V0Q29udGVudEZpbGVzKHVzZXJuYW1lOiBzdHJpbmcsIGNvbnRlbnRUeXBlPzogJ2ltYWdlJyB8ICd2aWRlbycgfCAncG9zdCcpOiBQcm9taXNlPENvbnRlbnRGaWxlW10+IHtcbiAgICBjb25zdCBmb2xkZXJzID0gYXdhaXQgdGhpcy5nZXRVc2VyRm9sZGVycyh1c2VybmFtZSlcbiAgICBpZiAoIWZvbGRlcnMpIHtcbiAgICAgIC8vIFJldHVybiBlbXB0eSBhcnJheSBpbnN0ZWFkIG9mIHRocm93aW5nIGVycm9yIGZvciBiZXR0ZXIgVVhcbiAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnRQYXRocyA9IGNvbnRlbnRUeXBlID8gW2ZvbGRlcnNbYCR7Y29udGVudFR5cGV9c1BhdGhgXV0gOiBbXG4gICAgICBmb2xkZXJzLmltYWdlc1BhdGgsXG4gICAgICBmb2xkZXJzLnZpZGVvc1BhdGgsXG4gICAgICBmb2xkZXJzLnBvc3RzUGF0aFxuICAgIF1cblxuICAgIGNvbnN0IGFsbEZpbGVzOiBDb250ZW50RmlsZVtdID0gW11cblxuICAgIGZvciAoY29uc3QgY29udGVudFBhdGggb2YgY29udGVudFBhdGhzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IGZzLnJlYWRkaXIoY29udGVudFBhdGgpXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgIGlmIChmaWxlID09PSAnLmdpdGtlZXAnKSBjb250aW51ZVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKGNvbnRlbnRQYXRoLCBmaWxlKVxuICAgICAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgZnMuc3RhdChmaWxlUGF0aClcbiAgICAgICAgICBcbiAgICAgICAgICBhbGxGaWxlcy5wdXNoKHtcbiAgICAgICAgICAgIGlkOiBwYXRoLnBhcnNlKGZpbGUpLm5hbWUsXG4gICAgICAgICAgICBmaWxlbmFtZTogZmlsZSxcbiAgICAgICAgICAgIG9yaWdpbmFsTmFtZTogZmlsZSwgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB5b3UnZCBzdG9yZSB0aGlzIG1ldGFkYXRhXG4gICAgICAgICAgICBtaW1lVHlwZTogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsIC8vIFlvdSdkIGRldGVybWluZSB0aGlzIGZyb20gZmlsZSBleHRlbnNpb25cbiAgICAgICAgICAgIHNpemU6IHN0YXRzLnNpemUsXG4gICAgICAgICAgICBwYXRoOiBmaWxlUGF0aCxcbiAgICAgICAgICAgIHVwbG9hZGVkQXQ6IHN0YXRzLmJpcnRodGltZS50b0lTT1N0cmluZygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gcmVhZCBjb250ZW50IGRpcmVjdG9yeSAke2NvbnRlbnRQYXRofTpgLCBlcnJvcilcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYWxsRmlsZXMuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi51cGxvYWRlZEF0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLnVwbG9hZGVkQXQpLmdldFRpbWUoKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgdXNlciBjb250ZW50XG4gICAqL1xuICBhc3luYyBkZWxldGVDb250ZW50KHVzZXJuYW1lOiBzdHJpbmcsIGZpbGVJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZm9sZGVycyA9IGF3YWl0IHRoaXMuZ2V0VXNlckZvbGRlcnModXNlcm5hbWUpXG4gICAgaWYgKCFmb2xkZXJzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgZm9sZGVycyBub3QgZm91bmQnKVxuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnRGaWxlcyA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEZpbGVzKHVzZXJuYW1lKVxuICAgIGNvbnN0IGZpbGVUb0RlbGV0ZSA9IGNvbnRlbnRGaWxlcy5maW5kKGZpbGUgPT4gZmlsZS5pZCA9PT0gZmlsZUlkKVxuICAgIFxuICAgIGlmICghZmlsZVRvRGVsZXRlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRlbnQgZmlsZSBub3QgZm91bmQnKVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBmcy51bmxpbmsoZmlsZVRvRGVsZXRlLnBhdGgpXG4gICAgICBcbiAgICAgIC8vIExvZyB0aGUgZGVsZXRpb25cbiAgICAgIGF3YWl0IHRoaXMubG9nQWN0aXZpdHkodXNlcm5hbWUsICdjb250ZW50X2RlbGV0ZScsIHtcbiAgICAgICAgZmlsZUlkLFxuICAgICAgICBmaWxlbmFtZTogZmlsZVRvRGVsZXRlLmZpbGVuYW1lLFxuICAgICAgICBvcmlnaW5hbE5hbWU6IGZpbGVUb0RlbGV0ZS5vcmlnaW5hbE5hbWVcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgY29udGVudDonLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ29udGVudCBkZWxldGlvbiBmYWlsZWQnKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3RvcmFnZSBzdGF0aXN0aWNzIGZvciBhIHVzZXJcbiAgICovXG4gIGFzeW5jIGdldFVzZXJTdG9yYWdlU3RhdHModXNlcm5hbWU6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHRvdGFsRmlsZXM6IG51bWJlclxuICAgIHRvdGFsU2l6ZTogbnVtYmVyXG4gICAgY29udGVudEJyZWFrZG93bjoge1xuICAgICAgaW1hZ2VzOiBudW1iZXJcbiAgICAgIHZpZGVvczogbnVtYmVyXG4gICAgICBwb3N0czogbnVtYmVyXG4gICAgfVxuICAgIGFjdGl2aXR5TG9nczogbnVtYmVyXG4gIH0+IHtcbiAgICBjb25zdCBmb2xkZXJzID0gYXdhaXQgdGhpcy5nZXRVc2VyRm9sZGVycyh1c2VybmFtZSlcbiAgICBpZiAoIWZvbGRlcnMpIHtcbiAgICAgIC8vIFJldHVybiBkZWZhdWx0IHN0YXRzIGluc3RlYWQgb2YgdGhyb3dpbmcgZXJyb3IgZm9yIGJldHRlciBVWFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG90YWxGaWxlczogMCxcbiAgICAgICAgdG90YWxTaXplOiAwLFxuICAgICAgICBjb250ZW50QnJlYWtkb3duOiB7XG4gICAgICAgICAgaW1hZ2VzOiAwLFxuICAgICAgICAgIHZpZGVvczogMCxcbiAgICAgICAgICBwb3N0czogMFxuICAgICAgICB9LFxuICAgICAgICBhY3Rpdml0eUxvZ3M6IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50RmlsZXMgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRGaWxlcyh1c2VybmFtZSlcbiAgICBjb25zdCBhY3Rpdml0eUxvZ3MgPSBhd2FpdCB0aGlzLmdldEFjdGl2aXR5TG9ncyh1c2VybmFtZSlcblxuICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgdG90YWxGaWxlczogY29udGVudEZpbGVzLmxlbmd0aCxcbiAgICAgIHRvdGFsU2l6ZTogY29udGVudEZpbGVzLnJlZHVjZSgoc3VtLCBmaWxlKSA9PiBzdW0gKyBmaWxlLnNpemUsIDApLFxuICAgICAgY29udGVudEJyZWFrZG93bjoge1xuICAgICAgICBpbWFnZXM6IGNvbnRlbnRGaWxlcy5maWx0ZXIoZiA9PiBmLnBhdGguaW5jbHVkZXMoJ2ltYWdlcycpKS5sZW5ndGgsXG4gICAgICAgIHZpZGVvczogY29udGVudEZpbGVzLmZpbHRlcihmID0+IGYucGF0aC5pbmNsdWRlcygndmlkZW9zJykpLmxlbmd0aCxcbiAgICAgICAgcG9zdHM6IGNvbnRlbnRGaWxlcy5maWx0ZXIoZiA9PiBmLnBhdGguaW5jbHVkZXMoJ3Bvc3RzJykpLmxlbmd0aFxuICAgICAgfSxcbiAgICAgIGFjdGl2aXR5TG9nczogYWN0aXZpdHlMb2dzLmxlbmd0aFxuICAgIH1cblxuICAgIHJldHVybiBzdGF0c1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwIHVzZXIgZGF0YSAoZm9yIGFjY291bnQgZGVsZXRpb24pXG4gICAqL1xuICBhc3luYyBkZWxldGVVc2VyRGF0YSh1c2VybmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc2FuaXRpemVkVXNlcm5hbWUgPSB0aGlzLnNhbml0aXplVXNlcm5hbWUodXNlcm5hbWUpXG4gICAgY29uc3QgdXNlclJvb3RQYXRoID0gcGF0aC5qb2luKFVTRVJTX0RJUiwgc2FuaXRpemVkVXNlcm5hbWUpXG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgZnMucm0odXNlclJvb3RQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSwgZm9yY2U6IHRydWUgfSlcbiAgICAgIGNvbnNvbGUubG9nKGBVc2VyIGRhdGEgZGVsZXRlZCBmb3IgJHtzYW5pdGl6ZWRVc2VybmFtZX1gKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIHVzZXIgZGF0YSBmb3IgJHtzYW5pdGl6ZWRVc2VybmFtZX06YCwgZXJyb3IpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgZGF0YSBkZWxldGlvbiBmYWlsZWQnKVxuICAgIH1cbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3Qgc3RvcmFnZVNlcnZpY2UgPSBuZXcgU3RvcmFnZVNlcnZpY2UoKVxuZXhwb3J0IGRlZmF1bHQgc3RvcmFnZVNlcnZpY2VcbiJdLCJuYW1lcyI6WyJwcm9taXNlcyIsImZzIiwicGF0aCIsInY0IiwidXVpZHY0IiwiU1RPUkFHRV9ST09UIiwicHJvY2VzcyIsImVudiIsIlVTRVJTX0RJUiIsImpvaW4iLCJTdG9yYWdlU2VydmljZSIsImNvbnN0cnVjdG9yIiwiaW5pdGlhbGl6ZWQiLCJpbml0aWFsaXplU3RvcmFnZSIsIm1rZGlyIiwicmVjdXJzaXZlIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiRXJyb3IiLCJjcmVhdGVVc2VyRm9sZGVycyIsInVzZXJuYW1lIiwic2FuaXRpemVkVXNlcm5hbWUiLCJzYW5pdGl6ZVVzZXJuYW1lIiwidXNlclJvb3RQYXRoIiwiZm9sZGVyU3RydWN0dXJlIiwicm9vdFBhdGgiLCJjb250ZW50UGF0aCIsImFjdGl2aXR5UGF0aCIsImltYWdlc1BhdGgiLCJ2aWRlb3NQYXRoIiwicG9zdHNQYXRoIiwicGF5bWVudHNQYXRoIiwiYW5hbHl0aWNzUGF0aCIsImNyZWF0ZUluaXRpYWxBY3Rpdml0eUxvZ3MiLCJjcmVhdGVHaXRrZWVwRmlsZXMiLCJyZXBsYWNlIiwidG9Mb3dlckNhc2UiLCJpbml0aWFsTG9ncyIsImxvZ2lucyIsImludGVyYWN0aW9ucyIsInN1YnNjcmlwdGlvbnMiLCJjb250ZW50X3VwbG9hZHMiLCJwYXltZW50cyIsImZpbGVuYW1lIiwiZGF0YSIsIk9iamVjdCIsImVudHJpZXMiLCJmaWxlUGF0aCIsIndyaXRlRmlsZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdHJ1Y3R1cmUiLCJkaXJlY3RvcmllcyIsImRpciIsImdpdGtlZXBQYXRoIiwiZ2V0VXNlckZvbGRlcnMiLCJhY2Nlc3MiLCJsb2dBY3Rpdml0eSIsInR5cGUiLCJkZXRhaWxzIiwibWV0YWRhdGEiLCJmb2xkZXJzIiwibG9nRW50cnkiLCJpZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImxvZ0ZpbGUiLCJsb2dQYXRoIiwiZXhpc3RpbmdMb2dzIiwicmVhZEZpbGUiLCJsb2dzIiwicGFyc2UiLCJwdXNoIiwibGVuZ3RoIiwic3BsaWNlIiwic3RvcmVDb250ZW50IiwiZmlsZSIsIm9yaWdpbmFsTmFtZSIsIm1pbWVUeXBlIiwiY29udGVudFR5cGUiLCJmaWxlSWQiLCJleHRlbnNpb24iLCJleHRuYW1lIiwidGFyZ2V0UGF0aCIsImNvbnRlbnRGaWxlIiwic2l6ZSIsInVwbG9hZGVkQXQiLCJnZXRBY3Rpdml0eUxvZ3MiLCJsb2dUeXBlIiwibG9nRmlsZXMiLCJhbGxMb2dzIiwibG9nRGF0YSIsIndhcm4iLCJzb3J0IiwiYSIsImIiLCJnZXRUaW1lIiwiZ2V0Q29udGVudEZpbGVzIiwiY29udGVudFBhdGhzIiwiYWxsRmlsZXMiLCJmaWxlcyIsInJlYWRkaXIiLCJzdGF0cyIsInN0YXQiLCJuYW1lIiwiYmlydGh0aW1lIiwiZGVsZXRlQ29udGVudCIsImNvbnRlbnRGaWxlcyIsImZpbGVUb0RlbGV0ZSIsImZpbmQiLCJ1bmxpbmsiLCJnZXRVc2VyU3RvcmFnZVN0YXRzIiwidG90YWxGaWxlcyIsInRvdGFsU2l6ZSIsImNvbnRlbnRCcmVha2Rvd24iLCJpbWFnZXMiLCJ2aWRlb3MiLCJwb3N0cyIsImFjdGl2aXR5TG9ncyIsInJlZHVjZSIsInN1bSIsImZpbHRlciIsImYiLCJpbmNsdWRlcyIsImRlbGV0ZVVzZXJEYXRhIiwicm0iLCJmb3JjZSIsInN0b3JhZ2VTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/storage-service.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstorage%2Factivity%2Froute&page=%2Fapi%2Fstorage%2Factivity%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstorage%2Factivity%2Froute.ts&appDir=%2FUsers%2Frishalbabu%2FDocuments%2FGitHub%2FFlavours%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frishalbabu%2FDocuments%2FGitHub%2FFlavours&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();